<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;obj&#x2F;machinery&#x2F;atmospherics&#x2F;pipe&#x2F;smart - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="obj/machinery/atmospherics/pipe/smart.html#var">Var Details</a> - <a href="obj/machinery/atmospherics/pipe/smart.html#proc">Proc Details</a></header>
<main>
<h1>smart <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/<a href="obj/machinery/atmospherics/pipe.html">pipe</a>/<a href="obj/machinery/atmospherics/pipe/smart.html">smart</a></aside>
        
    
            <a href="https://github.com/Profakos/orbstation/blob/34e59b6e225cd074651eb59e567c9ea121d18021/code/modules/atmospherics/machinery/pipes/smart.dm#L3">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;atmospherics&#x2F;machinery&#x2F;pipes&#x2F;smart.dm 3"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="obj/machinery/atmospherics/pipe/smart.html#var/connections">connections</a></th><td>Current active connections</td></tr>
            <tr><th><a href="obj/machinery/atmospherics/pipe/smart.html#var/map_loaded_pipe">map_loaded_pipe</a></th><td>Was this pipe created during map load</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="obj/machinery/atmospherics/pipe/smart.html#proc/append_directions">append_directions</a></th><td>helper function to append all directions into an single bit flag</td></tr>
            <tr><th><a href="obj/machinery/atmospherics/pipe/smart.html#proc/set_init_directions">set_init_directions</a></th><td>For pipes created during mapload we draw the pipes sprite only in directions where its connected to a machine
so for example if an T shaped pipe is connected only in its EAST &amp; WEST directions then only those ends are drawn
but the SOUTH end is not drawn
this will allow mappers to use whatever pipes but the end result has no visual clutter.
This is actually just an bandage for lazy mappers using + pipes all over the place without carying about directions so hopefully when they map pipes correctly we can remove this</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/connections"><aside class="declaration">var </aside>connections
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Profakos/orbstation/blob/34e59b6e225cd074651eb59e567c9ea121d18021/code/modules/atmospherics/machinery/pipes/smart.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;atmospherics&#x2F;machinery&#x2F;pipes&#x2F;smart.dm 14"/></a></h3>
        <p>Current active connections</p><h3 id="var/map_loaded_pipe"><aside class="declaration">var </aside>map_loaded_pipe
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Profakos/orbstation/blob/34e59b6e225cd074651eb59e567c9ea121d18021/code/modules/atmospherics/machinery/pipes/smart.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;atmospherics&#x2F;machinery&#x2F;pipes&#x2F;smart.dm 16"/></a></h3>
        <p>Was this pipe created during map load</p><h2 id="proc">Proc Details</h2><h3 id="proc/append_directions"><aside class="declaration">proc </aside>append_directions<aside>(/list/spanning_directions) 
        
    
            <a href="https://github.com/Profakos/orbstation/blob/34e59b6e225cd074651eb59e567c9ea121d18021/code/modules/atmospherics/machinery/pipes/smart.dm#L23">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;atmospherics&#x2F;machinery&#x2F;pipes&#x2F;smart.dm 23"/></a></aside>
        </h3>
        <p>helper function to append all directions into an single bit flag</p><h3 id="proc/set_init_directions"><aside class="parent"><a title="/obj/machinery/atmospherics" href="obj/machinery/atmospherics.html#proc/set_init_directions">&uarr;</a></aside>set_init_directions<aside>(init_dir) 
        
    
            <a href="https://github.com/Profakos/orbstation/blob/34e59b6e225cd074651eb59e567c9ea121d18021/code/modules/atmospherics/machinery/pipes/smart.dm#L86">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;atmospherics&#x2F;machinery&#x2F;pipes&#x2F;smart.dm 86"/></a></aside>
        </h3>
        <p>For pipes created during mapload we draw the pipes sprite only in directions where its connected to a machine
so for example if an T shaped pipe is connected only in its EAST &amp; WEST directions then only those ends are drawn
but the SOUTH end is not drawn
this will allow mappers to use whatever pipes but the end result has no visual clutter.
This is actually just an bandage for lazy mappers using + pipes all over the place without carying about directions so hopefully when they map pipes correctly we can remove this</p>
<p>if pipe is connected in only one direction[e.g. after disconnecting its neighbour] then to avoid a broken sprite append the reverse direction of its one connected end.
this wont work for L pipes because if one of its ends is broken then the opposite direction of any of its last connected end is invalid
e.g. for an L pipe if the top<a href="https://secure.byond.com/docs/ref/#/atom/var/dir" title="NORTH">NORTH</a> end is broken the opposite of its one remaining connected end[i.e EAST END] is WEST but thats not an valid direction for this pipe
so we have to again check one last time after this to make sure the pipe isnt broken</p>
<p>for pipes created by players during the round we draw the pipe in all directions so they
can visually see what ends are free.</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/Profakos/orbstation/tree/34e59b6e225cd074651eb59e567c9ea121d18021">34e59b6</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
